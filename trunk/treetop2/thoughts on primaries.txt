there have to be two categories of primaries. those that can instantiate nodes and those that can't.

rule primary
  prefix atomic
  /
  atomic repetition_suffix node_class_declarations
  /
  atomic optional_suffix
  /
  atomic_instantiator node_class_declarations
  /
  atomic_propagator
end

at the end of sequences primaries need to entirely disallow node_class_declaration. this simplifies the rule because the propagator / instantiator distinction is irrelevant.

rule sequence_terminus_primary
  prefix atomic
  /
  atomic suffix
  /
  atomic
end










